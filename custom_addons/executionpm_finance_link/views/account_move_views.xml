<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_move_form_execution_finance" model="ir.ui.view">
        <field name="name">account.move.form.execution.finance</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_move_form"/>
        <field name="arch" type="xml">
            <xpath expr="//header" position="after">
                <div class="alert alert-warning mb-0 text-center" role="alert" 
                     invisible="not execution_progress_id or state != 'draft'">
                    <i class="fa fa-info-circle"/> This validation is linked to Execution Progress. 
                    Posting will be blocked until the progress is <b>Validated</b>.
                </div>
            </xpath>
            <xpath expr="//group[@id='header_right_group']" position="inside">
                <field name="execution_progress_id" 
                       options="{'no_create': True}"
                       placeholder="Select validated progress..."
                       readonly="state != 'draft'"/>
                <field name="execution_project_id" invisible="1"/>
            </xpath>
        </field>
    </record>
</odoo>
