# Execution PM Planning - Module Summary

**Module Name:** `executionpm_planning`  
**Version:** 18.0.1.0.0  
**Created:** January 20, 2026  
**License:** LGPL-3

---

## ğŸ“‹ Overview

This module enforces detailed execution planning for infrastructure projects. It requires valid, weighted task planning from contractors before a project can proceed to the execution phase.

---

## ğŸ“ File Structure

```
executionpm_planning/
â”œâ”€â”€ __init__.py                           # Module init
â”œâ”€â”€ __manifest__.py                       # Module manifest
â”œâ”€â”€ SUMMARY.md                            # This file
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ execution_planning.py             # Master planning document
â”‚   â”œâ”€â”€ execution_planning_lot.py         # Work packages (Lots)
â”‚   â”œâ”€â”€ execution_planning_task.py        # Detailed tasks w/ weights
â”‚   â””â”€â”€ project_project.py                # Extension to enforce logic
â”œâ”€â”€ security/
â”‚   â”œâ”€â”€ executionpm_planning_security.xml # Record rules (Edit drafts only)
â”‚   â””â”€â”€ ir.model.access.csv               # Access rights
â””â”€â”€ views/
    â”œâ”€â”€ execution_planning_views.xml      # Main planning form/list
    â”œâ”€â”€ execution_planning_lot_views.xml  # Lot views
    â”œâ”€â”€ execution_planning_task_views.xml # Task views
    â”œâ”€â”€ project_project_views.xml         # Smart button extension
    â””â”€â”€ menu_views.xml                    # Menu items
```

---

## ğŸ—ƒï¸ Models Created

### 1. `execution.planning`
The master document container for a project's schedule.

| Field | Type | Description |
|-------|------|-------------|
| `name` | Char | Reference (e.g., PLAN001) |
| `project_id` | Many2one | Related Project |
| `state` | Selection | `draft` â†’ `submitted` â†’ `approved` / `rejected` |
| `total_physical_weight` | Float | Sum of task weights (Must be 100%) |
| `planning_start_date` | Date | Computed min date |
| `planning_end_date` | Date | Computed max date |

### 2. `execution.planning.lot`
Structural subdivision (Work Packages).

| Field | Type | Description |
|-------|------|-------------|
| `name` | Char | Lot Name (e.g., "Earthworks") |
| `planning_id` | Many2one | Parent Planning |
| `task_ids` | One2many | Contained Tasks |
| `start_date` | Date | Computed from tasks |
| `end_date` | Date | Computed from tasks |

### 3. `execution.planning.task`
Granular execution tasks.

| Field | Type | Description |
|-------|------|-------------|
| `name` | Char | Task Description |
| `lot_id` | Many2one | Parent Lot |
| `date_start` | Date | Planned Start |
| `date_end` | Date | Planned End |
| `duration` | Integer | Computed Days |
| `weight` | Float | Physical Weight % (contribution to total project) |

---

## ğŸš¦ Workflow & Logic

### Approval Workflow
1.  **Draft**: Contractor creates lots and tasks.
2.  **Submit**: System checks:
    *   Is `total_physical_weight` == 100.00%?
    *   Are there tasks defined?
    *   *If yes, move to Submitted.*
3.  **Review**: PMO/Manager reviews the plan.
    *   **Approve**: Plan becomes the **Active Planning** for the project.
    *   **Reject**: Reason is logged, state resets to allow edits.

### Project Execution Constraint
A project **cannot** be moved to the `Running` state unless it has an `Approved` active planning document.

*Error Message:*
> "Cannot start execution! An approved Execution Planning document is required before moving to the Running state."

---

## ğŸ” Security & Access Rights

| Group | Permissions |
|-------|-------------|
| **Execution User** (Contractors) | Can **Create/Edit** planning only when in `Draft` state. Read-only otherwise. |
| **Execution Manager** (PMO) | Can **Approve** or **Reject** submitted plans. Can edit in any state if needed customization allows. |

---

## ğŸš€ Usage Guide

1.  **Navigate to Project**: Open an infrastructure project.
2.  **Open Planning**: Click the "Planning" smart button.
3.  **Create Plan**:
    *   Add Lots (e.g., Foundation, Structure).
    *   Add Tasks to Lots with Start/End dates and Weights.
4.  **Validate**: Ensure task weights sum to 100%.
5.  **Submit**: Send for approval.
6.  **Approve**: Manager approves the plan.
7.  **Start Project**: You can now click "Start Execution" on the main project.

---
*Generated by Execution PM Planning v18.0.1.0.0*
